services:
  traccar:
    image: traccar/traccar:latest
    container_name: traccar
    restart: unless-stopped

    # ===============================
    # PORTAS DO TRACCAR
    # ===============================
    ports:
      # Painel Web
      - "8082:8082"

      # Cliente oficial Traccar (Android/iOS)
      - "5055:5055"

      # Protocolos extras (use somente os necessários)
      # - "5000:5000"
      # - "5001:5001"
      # - "5013:5013"

    # ===============================
    # VOLUMES – DIRETÓRIO LOCAL
    # ===============================
    volumes:
      - /home/markovivas/dockge/traccar:/opt/traccar/data

    # ===============================
    # CONFIGURAÇÕES DO SISTEMA
    # ===============================
    environment:
      TZ: "America/Sao_Paulo"

    # ===============================
    # HEALTHCHECK
    # ===============================
    healthcheck:
      test: ["CMD", "wget", "-qO-", "http://localhost:8082", "||", "exit 1"]
      interval: 30s
      timeout: 10s
      retries: 5
      start_period: 20s
